<script src="https://unpkg.com/html5-qrcode"></script>

<div id="scanner-container">
  <div id="reader" style="width: 100%;"></div>
  <button id="start-ar-btn" style="display:none; font-size: 20px; padding: 20px;">
    QR Riconosciuto! Clicca qui per l'AR
  </button>
</div>

<script>
  const html5QrCode = new Html5Qrcode("reader");
  const qrCodeSuccessCallback = (decodedText, decodedResult) => {
      // 1. Ferma lo scanner
      html5QrCode.stop();
      document.getElementById('reader').style.display = 'none';
      
      // 2. Mostra il bottone per entrare in WebXR
      const btn = document.getElementById('start-ar-btn');
      btn.style.display = 'block';
      
      // 3. Salva i dati del QR per usarli in AR (opzionale)
      window.qrData = decodedText; 
  };

  html5QrCode.start({ facingMode: "environment" }, { fps: 10 }, qrCodeSuccessCallback);
</script>
